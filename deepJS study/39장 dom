DOM은 HTML 문서의 계층적 구조와 정보를 표현하며 이를 제어하는 API를 제공하고 노드 객체들로 구성된 트리 자료구조다.

노드 타입: 문서 노드 / 요소 노드 / 어트리뷰트 노드 / 텍스트 노드

문서노드: DOM 트리의 최상위의 루트 노드로서 dococument 객체를 말한다. HTML 문서당 dococument 객체는 하나며 때문에 script가 분리되어도 하나의 전역객체를 공유한다. 이것을 막기 위해서 모듈 기능을 사용해서 스코프를 나누어준다.
요소 노드: HTML 요소를 나타낸다. (head / body 등등)
어트리뷰트 노드: 어트리뷰트 노드는 지정된 HTML 요소의 요소 노드와 연결되어 있다. 부모 노드가 없다.
텍스트 노드: HTML요소의 텍스트를 가리키는 객체. 요소 노드의 자식 노드이며 자식 노드를 가질 수 없는 리프 노드다.

노드 객체도 자바스크립트 객체이므로 프로토타입에 의한 상속 구조를 갖는다.
모든 노드 객체는 Object, EventTarget, Node 인터페이스를 상속받는다.
API를 상속받아 사용할 수도 있고 각 요소 노드마다 고유한 기능이 있다.

HTML 요소에 id 어트리뷰트를 부여하면 전역 변수가 암묵적으로 등록되고 노드 객체가 할당된다. id 값과 동일한 이름의 전역 변수가 선언되어 있는경우 전역 변수에 노드 객체는 할당되지 않는다. 즉, id값과 같은 이름의 전역변수가 없는 경우에만 노드 객체 할당.


--------------------------------

HTMLCollection과 NodeList는 노드 객체 상태 변화를 실시간으로 반영하는 객체다.
NodeList는 보통 정적인 상태를 유지하지만 경우에 따라 live로 동작 할 때가 있다.(childNode 프로퍼티 등)

getElementById와 getElementsByClassName은 HTMLCollection이므로 live로 반영된다.
querySelector와 querySelectorAll은 NodeList 객체로 반환하는데 실시간 반영이 되지 않고 non-live이다.

공백/ 탭 / 줄바꿈 등의 공백 문자는 텍스트 노드를 생성한다.

자식 노드 존재 확인: hasChildNodes 메서드 / 있으면 true 반환 없으면 false
부모 노드 탐색: parentNode

요소 노드의 텍스트 조작: nodeValue / 노드 객체의 프로퍼티를 참조하면 노드 객체의 값을 반환. 노드 객체의 값이란 텍스트 노드의 텍스트이다. 텍스트 노드가 아닌 노드 즉, 문서 노드나 요소 노드의 nodeValue 프로퍼티를 참조하면 null을 반환한다.

textContent : 요소 노드의 시작과 끝 사이에 모든 텍스트를 반환한다. 자식 요소 노드들의 텍스트도 포함한다.

innerHTML
요소 노드의 HTML 마크업을 취득하거나 변경한다. textContent와 다른점은 HTML 마크업을 무시하고 텍스트만 반환하지만 innerHTML 프로퍼티는 마크업이 포함된 문자열을 그대로 반환한다. 요소 노드의 innerHTML 프로퍼티에 문자열을 할당하면 요소 노드의 모든 자식 노드가 제거되고 할당한 문자열에 포함되어 있는 HTML 마크업이 파싱되어 요소 노드의 자식 노드로 DOM에 반영된다. 즉 마크업 문자열을 조작하여 DOM 조작이 가능하다.

장점은 돔 조작이 간편하고 직관적이지만 크로스 사이트 스크립팅 공격에 취약하다. 또한 기존 요소 사이에 삽입할 수 없어서 유용하지 않다.

요소 노드 생성 : createElement 메서드 / 메서드로 생성한 요소 노드는 기존 DOM에 자동으로 추가되지 않으므로 생성된 요소노드를 따로 DOM에 추가하는 작업을 해야한다.



724쪽-745

style 프로퍼티는 요소 노드의 인라인 스타일을 취득, 추가 , 변경한다.

클래스 조작
className: HTML 요소의 class 어트리뷰트 값을 취득하거나 변경한다.
classsList: class 어트리뷰트의 정보를 담은 DOMTokenList 객체를 반환한다.(유사 배열 객체이면서 이터러블)

DOMTokenList 객체의 메서드
add / item / contains / replace / toggle 그 밖에도 forEach / entries / key / value / support 메서드를 제공한다.

getComputedStyle 메서드 : style 프로퍼티는 인라인 스타일만 반환하므로 클래스를 적용한 스타일이나 상속을 통해 암묵적으로 적용된 스타일은 style 프로퍼티로 참조할 수 없다. 이때 HTML  요소에 적용되어 있는 모든 CSS 스타일을 참조해야 할 경우 이 메서드를 사용한다.


